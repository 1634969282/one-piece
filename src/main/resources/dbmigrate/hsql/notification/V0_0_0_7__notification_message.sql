

-------------------------------------------------------------------------------
--  notification message
-------------------------------------------------------------------------------
CREATE TABLE NOTIFICATION_MESSAGE(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    REQUEST_KEY VARCHAR(50),
    DESTINATION VARCHAR(200),
    TEMPLATE_CODE VARCHAR(50),
    CONTENT VARCHAR(65535),
    CATALOG VARCHAR(50),
    SOURCE VARCHAR(50),
    TAG VARCHAR(50),

    PRIORITY INT,
    CREATE_TIME TIMESTAMP,
    UPDATE_TIME TIMESTAMP,
    STATUS VARCHAR(50),

    APP VARCHAR(50),

    CONFIG_ID BIGINT,
    QUEUE_ID BIGINT,

    CONSTRAINT PK_NOTIFICATION_MESSAGE PRIMARY KEY(ID),
    CONSTRAINT FK_NOTIFICATION_MESSAGE_CONFIG FOREIGN KEY (CONFIG_ID) REFERENCES NOTIFICATION_CONFIG(ID),
    CONSTRAINT FK_NOTIFICATION_MESSAGE_QUEUE FOREIGN KEY (QUEUE_ID) REFERENCES NOTIFICATION_QUEUE(ID)
);

COMMENT ON TABLE NOTIFICATION_MESSAGE IS '通知消息';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.ID IS 'id';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.REQUEST_KEY IS '请求标识';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.DESTINATION IS '接收人';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.TEMPLATE_CODE IS '模板';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.CONTENT IS '模板参数';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.CATALOG IS '分类：邮件，短信';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.SOURCE IS '来源：ip, web';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.TAG IS '标签';

COMMENT ON COLUMN NOTIFICATION_MESSAGE.PRIORITY IS '优先级';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.CREATE_TIME IS '创建时间';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.UPDATE_TIME IS '更新时间';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.STATUS IS '状态';

COMMENT ON COLUMN NOTIFICATION_MESSAGE.APP IS 'APP';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.CONFIG_ID IS '配置id';
COMMENT ON COLUMN NOTIFICATION_MESSAGE.QUEUE_ID IS '队列id';

